---
title: UITextField
categories:
 - iOS-UI
tags:
---

场景: 普通画面横竖皆可 特定画面限定竖屏(反之同理)

1. 重写该画面的supportedInterfaceOrientations方法 返回 UIInterfaceOrientationMaskPortrait
2. 因为该画面只允许竖屏 有一个情况需要注意就是从横屏画面切换到该画面时 就需要强制旋转为竖屏:

```objective-c
if ([[UIDevice currentDevice] responseToSelector: @selector(setOrientation:)]) {
  [[UIDevice currentDevice] setValue: [NSNumber numberWithInterger: UIDeviceOrientPortrait] forKey:@"orientation"];
}
```

3. shouldAutorotate 这个方法没有什么用

4. 2中的方法 存在一个问题 就是如果一个画面是基于TabBarController或NavigationController显示出来的 那么2中的方法不会被直接调用 而是调用Tab或Navi的这个方法 所以解决方案就是在2的基础上 在比如TabBarController中找到该画面 取到该画面的方向值 将这个值赋给自己的方向

   ```objective-c
   - (UIInterfaceOrientationMask)supportedInterfaceOrientations {
   	UINavigationController *navi = self.selectedViewController;
     return navi.visibleViewController.supportedInterfaceOrientations
   }
   ```

   注意: 该tabBarController必须是继承类 没有的话就搞一个

5. 其他问题1: 在固定竖屏的页面上 用modal方式弹出页面时 该model页面的方向没有被约束 仍旧为横竖屏 还会带动下方的固定竖屏页面 这个在页面有蒙版 不透明 能看见下面页面的情况下就不太妙 (原理不知) 解决方案: 将该modal页面也强制固定竖屏

   ```objective-c
   
     
   - (UIInterfaceOrientationMask)supportedInterfaceOrientations {
   	UITabBarController *tabBarController = (UITabBarController *)self.presentingViewController;
   UINavigationController *navi = tabBarController.selectedViewController;
     return navi.viewControllers.lastObject.supportedInterfaceOrientations;
   }
   ```

   其他问题2: 其他的在window上新增页面比如通过alert 那就需要传送一个值(下策 未想到更好的方案)



